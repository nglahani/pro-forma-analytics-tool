(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(95155),i=r(12115),a=r(32467),o=r(83101),n=r(14915);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:i,size:o,asChild:d=!1,...u}=e,h=d?a.DX:"button";return(0,s.jsx)(h,{className:(0,n.cn)(l({variant:i,size:o,className:r})),ref:t,...u})});d.displayName="Button"},11920:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(95155),i=r(95311),a=r(11890);function o(e){let{children:t}=e;return(0,s.jsx)(i.q_,{requireAuth:!0,children:(0,s.jsx)(a.N,{children:t})})}},56276:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var s=r(14915);class i{generateAPIKey(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,15),r=Math.random().toString(36).substring(2,8);return"".concat(this.API_KEY_PREFIX,"_").concat(e,"_").concat(t,"_").concat(r)}hashPassword(e){return btoa(e+"salt123")}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPassword(e){return e.length>=6}getStoredUsers(){let e=localStorage.getItem("pro_forma_users");return e?JSON.parse(e):[]}saveUsers(e){localStorage.setItem("pro_forma_users",JSON.stringify(e))}async register(e){if(!this.isValidEmail(e.email))throw Error("Invalid email format");if(!this.isValidPassword(e.password))throw Error("Password must be at least 6 characters");if(e.password!==e.confirm_password)throw Error("Passwords do not match");let t=this.getStoredUsers();if(t.find(t=>t.email===e.email))throw Error("User with this email already exists");let r=new Date().toISOString(),i={id:(0,s.$C)("user"),email:e.email,created_at:r,api_key:this.generateAPIKey(),password_hash:this.hashPassword(e.password)};t.push(i),this.saveUsers(t);let a=(0,s.$C)("session"),o=new Date(Date.now()+864e5).toISOString(),n={user:{id:i.id,email:i.email,created_at:i.created_at,api_key:i.api_key},session_token:a,expires_at:o};return this.storeSession(n),n}async login(e){if(!this.isValidEmail(e.email))throw Error("Invalid email format");let t=this.getStoredUsers().find(t=>t.email===e.email);if(!t)throw Error("Invalid email or password");let r=this.hashPassword(e.password);if(t.password_hash!==r)throw Error("Invalid email or password");let i=(0,s.$C)("session"),a=new Date(Date.now()+864e5).toISOString(),o={user:{id:t.id,email:t.email,created_at:t.created_at,api_key:t.api_key},session_token:i,expires_at:a};return this.storeSession(o),o}async logout(){localStorage.removeItem(this.STORAGE_KEY)}getCurrentUser(){let e=localStorage.getItem(this.STORAGE_KEY);if(!e)return null;try{let t=JSON.parse(e);if(new Date(t.expires_at)<new Date)return this.logout(),null;return t.user}catch(e){return null}}getAPIKey(){let e=this.getCurrentUser();return(null==e?void 0:e.api_key)||null}isAuthenticated(){return null!==this.getCurrentUser()}storeSession(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}async refreshSession(){let e=this.getCurrentUser();if(!e)return null;let t={user:e,session_token:(0,s.$C)("session"),expires_at:new Date(Date.now()+864e5).toISOString()};return this.storeSession(t),t}async regenerateAPIKey(){let e=this.getCurrentUser();if(!e)throw Error("User not authenticated");let t=this.generateAPIKey(),r=this.getStoredUsers(),i=r.findIndex(t=>t.id===e.id);if(-1!==i){r[i].api_key=t,this.saveUsers(r);let a={...e,api_key:t},o=(0,s.$C)("session"),n=new Date(Date.now()+864e5).toISOString();this.storeSession({user:a,session_token:o,expires_at:n})}return t}constructor(){this.STORAGE_KEY="pro_forma_user",this.API_KEY_PREFIX="pfa"}}let a=new i},82597:(e,t,r)=>{Promise.resolve().then(r.bind(r,11920))}},e=>{e.O(0,[349,580,176,533,915,640,441,255,358],()=>e(e.s=82597)),_N_E=e.O()}]);