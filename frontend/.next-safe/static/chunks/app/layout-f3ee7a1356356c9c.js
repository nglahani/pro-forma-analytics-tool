(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{10774:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>n});var s=r(95155),a=r(12115),i=r(56276);let o=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[l,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=setTimeout(()=>{n(i.y.getCurrentUser()),u(!1)},100);return()=>clearTimeout(e)},[]);let d=async e=>{u(!0);try{let t=await i.y.login(e);n(t.user)}catch(e){throw e}finally{u(!1)}},c=async e=>{u(!0);try{let t=await i.y.register(e);n(t.user)}catch(e){throw e}finally{u(!1)}},m=async()=>{u(!0);try{await i.y.logout(),n(null)}finally{u(!1)}},f=async()=>{let e=await i.y.refreshSession();e&&n(e.user)},h=async()=>{let e=await i.y.regenerateAPIKey();return r&&n({...r,api_key:e}),e};return(0,s.jsx)(o.Provider,{value:{user:r,isLoading:l,isAuthenticated:null!==r,login:d,register:c,logout:m,refreshSession:f,regenerateAPIKey:h,getAPIKey:()=>i.y.getAPIKey()},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},13673:()=>{},18516:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>y});var s=r(95155),a=r(12115),i=r(15116),o=r(83101),n=r(65229),l=r(14915);let u=i.Kq,d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.LM,{ref:t,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...a})});d.displayName=i.LM.displayName;let c=(0,o.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground",success:"border-green-200 bg-green-50 text-green-900"}},defaultVariants:{variant:"default"}}),m=a.forwardRef((e,t)=>{let{className:r,variant:a,...o}=e;return(0,s.jsx)(i.bL,{ref:t,className:(0,l.cn)(c({variant:a}),r),...o})});m.displayName=i.bL.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.rc,{ref:t,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...a})}).displayName=i.rc.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.bm,{ref:t,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...a,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=i.bm.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,l.cn)("text-sm font-semibold",r),...a})});h.displayName=i.hE.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,l.cn)("text-sm opacity-90",r),...a})});p.displayName=i.VY.displayName;var g=r(91463);function y(){let{toasts:e}=(0,g.dj)();return(0,s.jsxs)(u,{children:[e.map(function(e){let{id:t,title:r,description:a,action:i,...o}=e;return(0,s.jsxs)(m,{...o,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[r&&(0,s.jsx)(h,{children:r}),a&&(0,s.jsx)(p,{children:a})]}),i,(0,s.jsx)(f,{})]},t)}),(0,s.jsx)(d,{})]})}},56276:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});var s=r(14915);class a{generateAPIKey(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,15),r=Math.random().toString(36).substring(2,8);return"".concat(this.API_KEY_PREFIX,"_").concat(e,"_").concat(t,"_").concat(r)}hashPassword(e){return btoa(e+"salt123")}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPassword(e){return e.length>=6}getStoredUsers(){let e=localStorage.getItem("pro_forma_users");return e?JSON.parse(e):[]}saveUsers(e){localStorage.setItem("pro_forma_users",JSON.stringify(e))}async register(e){if(!this.isValidEmail(e.email))throw Error("Invalid email format");if(!this.isValidPassword(e.password))throw Error("Password must be at least 6 characters");if(e.password!==e.confirm_password)throw Error("Passwords do not match");let t=this.getStoredUsers();if(t.find(t=>t.email===e.email))throw Error("User with this email already exists");let r=new Date().toISOString(),a={id:(0,s.$C)("user"),email:e.email,created_at:r,api_key:this.generateAPIKey(),password_hash:this.hashPassword(e.password)};t.push(a),this.saveUsers(t);let i=(0,s.$C)("session"),o=new Date(Date.now()+864e5).toISOString(),n={user:{id:a.id,email:a.email,created_at:a.created_at,api_key:a.api_key},session_token:i,expires_at:o};return this.storeSession(n),n}async login(e){if(!this.isValidEmail(e.email))throw Error("Invalid email format");let t=this.getStoredUsers().find(t=>t.email===e.email);if(!t)throw Error("Invalid email or password");let r=this.hashPassword(e.password);if(t.password_hash!==r)throw Error("Invalid email or password");let a=(0,s.$C)("session"),i=new Date(Date.now()+864e5).toISOString(),o={user:{id:t.id,email:t.email,created_at:t.created_at,api_key:t.api_key},session_token:a,expires_at:i};return this.storeSession(o),o}async logout(){localStorage.removeItem(this.STORAGE_KEY)}getCurrentUser(){let e=localStorage.getItem(this.STORAGE_KEY);if(!e)return null;try{let t=JSON.parse(e);if(new Date(t.expires_at)<new Date)return this.logout(),null;return t.user}catch(e){return null}}getAPIKey(){let e=this.getCurrentUser();return(null==e?void 0:e.api_key)||null}isAuthenticated(){return null!==this.getCurrentUser()}storeSession(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}async refreshSession(){let e=this.getCurrentUser();if(!e)return null;let t={user:e,session_token:(0,s.$C)("session"),expires_at:new Date(Date.now()+864e5).toISOString()};return this.storeSession(t),t}async regenerateAPIKey(){let e=this.getCurrentUser();if(!e)throw Error("User not authenticated");let t=this.generateAPIKey(),r=this.getStoredUsers(),a=r.findIndex(t=>t.id===e.id);if(-1!==a){r[a].api_key=t,this.saveUsers(r);let i={...e,api_key:t},o=(0,s.$C)("session"),n=new Date(Date.now()+864e5).toISOString();this.storeSession({user:i,session_token:o,expires_at:n})}return t}constructor(){this.STORAGE_KEY="pro_forma_user",this.API_KEY_PREFIX="pfa"}}let i=new a},63340:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,41535,23)),Promise.resolve().then(r.t.bind(r,13673,23)),Promise.resolve().then(r.bind(r,87103)),Promise.resolve().then(r.bind(r,18516)),Promise.resolve().then(r.bind(r,10774))},87103:(e,t,r)=>{"use strict";r.d(t,{AccessibilityProvider:()=>l,Ws:()=>n});var s=r(95155),a=r(12115),i=r(44984);let o=(0,a.createContext)(null);function n(){let e=(0,a.useContext)(o);if(!e)throw Error("useAccessibility must be used within AccessibilityProvider");return e}function l(e){let{children:t}=e,[r,n]=(0,a.useState)([]),[l,u]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!0);(0,a.useRef)(null);let h=(0,a.useRef)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{{u(window.matchMedia("(prefers-reduced-motion: reduce)").matches),c(window.matchMedia("(prefers-contrast: high)").matches);let e=localStorage.getItem("accessibility-reduced-motion"),t=localStorage.getItem("accessibility-high-contrast"),r=localStorage.getItem("accessibility-keyboard-navigation");null!==e&&u("true"===e),null!==t&&c("true"===t),null!==r&&f("true"===r)}},[]),(0,a.useEffect)(()=>{"undefined"!=typeof document&&(document.documentElement.style.setProperty("--motion-duration",l?"0ms":"150ms"),d?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast"),m?document.documentElement.classList.remove("no-focus-visible"):document.documentElement.classList.add("no-focus-visible"))},[l,d,m]),(0,a.useEffect)(()=>{"undefined"!=typeof localStorage&&(localStorage.setItem("accessibility-reduced-motion",l.toString()),localStorage.setItem("accessibility-high-contrast",d.toString()),localStorage.setItem("accessibility-keyboard-navigation",m.toString()))},[l,d,m]);let g=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite",r="assertive"===t?p:h;r.current&&(r.current.textContent="",requestAnimationFrame(()=>{r.current&&(r.current.textContent=e)}),setTimeout(()=>{r.current&&(r.current.textContent="")},1e3))},[]),y=(0,a.useCallback)(e=>{try{let t=document.querySelector(e);if(t)return t.focus(),!0;return!1}catch(e){return!1}},[]),v=(0,a.useCallback)(e=>{let t=t=>{if(t.key!==i.QJ.keys.TAB||!e.current)return;let r=e.current.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select, [tabindex]:not([tabindex="-1"])'),s=r[0],a=r[r.length-1];t.shiftKey&&document.activeElement===s?(t.preventDefault(),a.focus()):t.shiftKey||document.activeElement!==a||(t.preventDefault(),s.focus())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[]),S=(0,a.useCallback)((e,t,r)=>{n(s=>s.find(t=>t.id===e)?s:[...s,{id:e,label:t,target:r}])},[]),w=(0,a.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,s.jsxs)(o.Provider,{value:{announce:g,focusElement:y,trapFocus:v,registerSkipLink:S,unregisterSkipLink:w,reducedMotion:l,highContrast:d,setReducedMotion:u,setHighContrast:c,enableKeyboardNavigation:m,setEnableKeyboardNavigation:f},children:[r.length>0&&(0,s.jsx)("div",{className:"sr-only focus-within:not-sr-only",children:(0,s.jsx)("nav",{"aria-label":"Skip navigation links",className:"fixed top-0 left-0 z-50",children:r.map(e=>(0,s.jsx)("a",{href:"#".concat(e.target),className:"block bg-blue-600 text-white p-2 m-1 rounded focus:not-sr-only",onClick:t=>{t.preventDefault(),y("#".concat(e.target))},children:e.label},e.id))})}),(0,s.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",ref:h}),(0,s.jsx)("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",ref:p}),t]})}},91463:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(12115);let a={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},i=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},l=[],u={toasts:[]};function d(e){u=((e,t)=>{switch(t.type){case a.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case a.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case a.DISMISS_TOAST:{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case a.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(u,e),l.forEach(e=>{e(u)})}function c(e){let{...t}=e,r=(i=(i+1)%Number.MAX_VALUE).toString(),s=()=>d({type:a.DISMISS_TOAST,toastId:r});return d({type:a.ADD_TOAST,toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:a.UPDATE_TOAST,toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(u);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:a.DISMISS_TOAST,toastId:e})}}}},e=>{e.O(0,[820,349,580,730,915,441,255,358],()=>e(e.s=63340)),_N_E=e.O()}]);